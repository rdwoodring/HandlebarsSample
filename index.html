<html>

    <head>
        <script src="handlebars.runtime-v4.0.4.js" type="text/javascript"></script>
        <script src="templates/templates.js" type="text/javascript"></script>
        <script src="jquery-2.1.4.min.js" type="text/javascript"></script>
    </head>

    <body>
        <div id="header-placeholder"></div>

        <!--<div>
          <a href="#"></a>
          <div id="people-placeholder"></div>
        </div>
        <div>
          <div></div>
        </div>-->

        <script type="text/javascript">
            renderTemplate(Handlebars.templates['header.hbs'], {'date' : new Date().toString()}, "#header-placeholder");

            apiRequest(Handlebars.templates['people.hbs'], 'http://swapi.co/api/people/1/', "#people-placeholder")
            .done(renderTemplate(Handlebars.templates['people.hbs'], result, "#api-placeholder"));

            function renderTemplate(template, contextData, placeholderId)
            {
                var context = contextData;
                var html = template(context);

                $(placeholderId).html(html);
            }

            function apiRequest(template, apiEndpoint, placeholderId)
            {
                $.ajax({
                    url: apiEndpoint
                })
                .done(function(result){
                    //renderTemplate(template, result, placeholderId);
                    //return result;
                    return result;
                })
                .fail(function() {
                    $("#api-placeholder").html("Uh oh!  The Sarlaac must have eaten those results...");
                })
                .always(function() {
                    //add code
                });
            }
        </script>
    </body>
</html>
